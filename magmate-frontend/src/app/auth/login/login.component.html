<!-- login.component.html-->
<div *ngIf="showPopup" class="auth-popup">
  <div class="auth-container">
    <div class="auth-card">
      <div class="popup-container">
        <button class="close-btn" (click)="closePopup()">
          <i class="material-icons">close</i>
        </button>
        <div class="auth-header">
          <h2>Connexion</h2>
          <p class="subtitle">Heureux de vous revoir !</p>
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="auth-form">
          <div class="form-group">
            <div class="input-container">
              <i class="material-icons icon">email</i>
              <input
                id="loginEmail"
                formControlName="email"
                type="email"
                placeholder="Adresse e-mail"
              />
            </div>
            <div
              class="error-message"
              *ngIf="
                loginForm.get('email')?.invalid &&
                loginForm.get('email')?.touched
              "
            >
              <small>Veuillez entrer une adresse email valide</small>
            </div>
          </div>

          <div class="form-group">
            <div class="input-container">
              <i class="material-icons icon">lock</i>
              <input
                id="loginPassword"
                formControlName="password"
                type="password"
                placeholder="Mot de passe"
              />
              <i
                class="material-icons toggle-password"
                (click)="togglePasswordVisibility()"
                ></i
              >
            </div>
            <div
              class="error-message"
              *ngIf="
                loginForm.get('password')?.invalid &&
                loginForm.get('password')?.touched
              "
            >
              <small>Veuillez entrer votre mot de passe</small>
            </div>
          </div>

          <div class="form-options">
            <div class="remember-me">
              <input type="checkbox" id="remember" formControlName="remember" />
              <label for="remember">Se souvenir de moi</label>
            </div>
            <a routerLink="/reset-password" class="forgot-password"
              >Mot de passe oubli√© ?</a
            >
          </div>

          <button
            type="submit"
            class="btn primary-btn"
            [disabled]="loginForm.invalid"
          >
            Se connecter
          </button>

          <div class="separator">
            <span>ou</span>
          </div>
          <div class="cont">
            <button
              type="button"
              class="btn google-btn"
              (click)="signInWithGoogle()"
            >
              <img
                src="images/google-icon.svg"
                alt="Google"
                class="google-icon"
              />
              Continuer avec Google
            </button>

            <div class="auth-footer">
              <p>
                Pas encore de compte ? <a routerLink="/signup">S'inscrire</a>
              </p>
            </div>
          </div>
        </form>

        <div *ngIf="errorMessage" class="alert error-alert">
          <i class="material-icons">error</i>
          <span>{{ errorMessage }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
